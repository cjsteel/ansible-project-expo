<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Christopher Steel"><link rel="shortcut icon" href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-6.1.7"><title>Creating a virtual python environment for ansible - Ansible Expo</title><link rel=stylesheet href=../../assets/stylesheets/main.19753c6b.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.196e0c26.min.css><meta name=theme-color content=#4051b5><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style></head> <body dir=ltr data-md-color-scheme data-md-color-primary=indigo data-md-color-accent=deep-purple> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#creating-an-ansible-virtual-python-environment class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=../.. title="Ansible Expo" class="md-header-nav__button md-logo" aria-label="Ansible Expo"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Ansible Expo </span> <span class="md-header-nav__topic md-ellipsis"> Creating a virtual python environment for ansible </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class="md-tabs__link md-tabs__link--active"> Home </a> </li> <li class=md-tabs__item> <a href=../ class=md-tabs__link> Development </a> </li> <li class=md-tabs__item> <a href=../../controller/ class=md-tabs__link> Controller </a> </li> <li class=md-tabs__item> <a href=../../maintenance-command-examples.md class=md-tabs__link> Usage </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Ansible Expo" class="md-nav__button md-logo" aria-label="Ansible Expo"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> Ansible Expo </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> Development <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Development data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"></span> Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../configuring-an-expo-development-system/ class=md-nav__link> configuration </a> </li> <li class=md-nav__item> <a href=../ansible-project-setup/ class=md-nav__link> ansible </a> </li> <li class=md-nav__item> <a href=../project-development/ class=md-nav__link> project development </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> Controller <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Controller data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"></span> Controller </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../controller/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../venv/installing-ansible-into-a-virtual-python-3-environment.md class=md-nav__link> venv </a> </li> <li class=md-nav__item> <a href=../../sshkeys class=md-nav__link> sshkeys </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> Usage <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Usage data-md-level=1> <label class=md-nav__title for=nav-4> <span class="md-nav__icon md-icon"></span> Usage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../maintenance-command-examples.md class=md-nav__link> Maintenance Commnads </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-2 type=checkbox id=nav-4-2> <label class=md-nav__link for=nav-4-2> Adding New Systems <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Adding New Systems" data-md-level=2> <label class=md-nav__title for=nav-4-2> <span class="md-nav__icon md-icon"></span> Adding New Systems </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-2-1 type=checkbox id=nav-4-2-1> <label class=md-nav__link for=nav-4-2-1> System preparations <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="System preparations" data-md-level=3> <label class=md-nav__title for=nav-4-2-1> <span class="md-nav__icon md-icon"></span> System preparations </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-2-1-1 type=checkbox id=nav-4-2-1-1> <label class=md-nav__link for=nav-4-2-1-1> BIOS/(U)EFI Settings <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="BIOS/(U)EFI Settings" data-md-level=4> <label class=md-nav__title for=nav-4-2-1-1> <span class="md-nav__icon md-icon"></span> BIOS/(U)EFI Settings </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../bios/enabling-wol.md class=md-nav__link> Wake-on-LAN (Wol) </a> </li> <li class=md-nav__item> <a href=../../bios/enabling-pxe.md class=md-nav__link> Network booting </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-2-1-2 type=checkbox id=nav-4-2-1-2> <label class=md-nav__link for=nav-4-2-1-2> Hardware <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Hardware data-md-level=4> <label class=md-nav__title for=nav-4-2-1-2> <span class="md-nav__icon md-icon"></span> Hardware </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../mdadm/index.md class=md-nav__link> Mirrored boot </a> </li> <li class=md-nav__item> <a href=../../chassis/index.md class=md-nav__link> Drive locations </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-2-1-3 type=checkbox id=nav-4-2-1-3> <label class=md-nav__link for=nav-4-2-1-3> DNS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=DNS data-md-level=4> <label class=md-nav__title for=nav-4-2-1-3> <span class="md-nav__icon md-icon"></span> DNS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../dns/index.md class=md-nav__link> DNS </a> </li> <li class=md-nav__item> <a href=../../etc_hosts/index.md class=md-nav__link> /etc/hosts file </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-2-2 type=checkbox id=nav-4-2-2> <label class=md-nav__link for=nav-4-2-2> Connectivity <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Connectivity data-md-level=3> <label class=md-nav__title for=nav-4-2-2> <span class="md-nav__icon md-icon"></span> Connectivity </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ssh/testing-connectivity.md class=md-nav__link> Connectivity test </a> </li> <li class=md-nav__item> <a href=../../ssh/sshagent.md class=md-nav__link> ssh agent </a> </li> <li class=md-nav__item> <a href=../../ssh/sshadd.md class=md-nav__link> ssh-add </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-2-3 type=checkbox id=nav-4-2-3> <label class=md-nav__link for=nav-4-2-3> inventory/production/hosts <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=inventory/production/hosts data-md-level=3> <label class=md-nav__title for=nav-4-2-3> <span class="md-nav__icon md-icon"></span> inventory/production/hosts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../inventory/workstation-example.md class=md-nav__link> Research Workstation example </a> </li> <li class=md-nav__item> <a href=../../inventory/server-example.yml class=md-nav__link> Storage Server example </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#creating-an-ansible-virtual-python-environment class=md-nav__link> Creating an Ansible virtual python environment </a> <nav class=md-nav aria-label="Creating an Ansible virtual python environment"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#using-the-latest-version-of-ansible class=md-nav__link> Using the latest version of Ansible </a> </li> <li class=md-nav__item> <a href=#creating-a-python-3-virtual-environment-for-your-ansible-installation class=md-nav__link> Creating a Python 3 virtual environment for your Ansible installation </a> </li> <li class=md-nav__item> <a href=#installing-ansible class=md-nav__link> Installing Ansible </a> <nav class=md-nav aria-label="Installing Ansible"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#confirmation class=md-nav__link> Confirmation </a> </li> <li class=md-nav__item> <a href=#creating-an-alias-using-bash_magic class=md-nav__link> Creating an alias using bash_magic </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1>Creating a virtual python environment for ansible</h1> <h2 id=creating-an-ansible-virtual-python-environment>Creating an Ansible virtual python environment<a class=headerlink href=#creating-an-ansible-virtual-python-environment title="Permanent link">&para;</a></h2> <p>First you will want to start a new terminal session.</p> <h3 id=using-the-latest-version-of-ansible>Using the latest version of Ansible<a class=headerlink href=#using-the-latest-version-of-ansible title="Permanent link">&para;</a></h3> <p>Again, in order the versions of Ansible that are available for installation you can use the <code>pip3 install ansible==</code> command with no version as we did when we created our mkdocs-material virtual environment.</p> <p>As in the mkdocs-material virtual environment creation we prefix our command using sudo so that it will run with out generating a permissions error.</p> <p>Again, we will examine the output in order to determine that the latest available version of Ansible that is installable using pip3: </p> <div class=codehilite><pre><span></span><code>sudo pip3 install <span class=nv>ansible</span><span class=o>==</span>
</code></pre></div> <p>In my case, the latest released version is 2.10.4</p> <h3 id=creating-a-python-3-virtual-environment-for-your-ansible-installation>Creating a Python 3 virtual environment for your Ansible installation<a class=headerlink href=#creating-a-python-3-virtual-environment-for-your-ansible-installation title="Permanent link">&para;</a></h3> <div class=codehilite><pre><span></span><code>python3 -m venv ~/.venv/ansible-2.10.4
</code></pre></div> <p>Next I activate the new Python environment. This will allow me to install Ansible into the new Python environment and will keep it sandboxed from my system level Python and any other virtual python environments that I create</p> <div class=codehilite><pre><span></span><code><span class=nb>source</span> ~/.venv/ansible-2.10.4/bin/activate
</code></pre></div> <p>Once activated your command prompt will be prefixed with name of the active virtual environment.</p> <p>In my case my new command prompt looks like this:</p> <div class=codehilite><pre><span></span><code><span class=o>(</span>ansible-2.10.4<span class=o>)</span> csteel@p1u20:~/MEGAsync/projects/ansible-project-expo$ 
</code></pre></div> <p>Virtual environment confirmation</p> <p>Next we confirm the location of current virtual environments pip3 command:</p> <div class=codehilite><pre><span></span><code>which pip3
</code></pre></div> <p>Example output:</p> <div class=codehilite><pre><span></span><code>/home/csteel/.venv/ansible-2.10.4/bin/pip3
</code></pre></div> <h3 id=installing-ansible>Installing Ansible<a class=headerlink href=#installing-ansible title="Permanent link">&para;</a></h3> <p>Once we are in our virtual environment we install our targeted version of Ansible:</p> <div class=codehilite><pre><span></span><code>pip3 install <span class=nv>ansible</span><span class=o>==</span><span class=m>2</span>.10.4
</code></pre></div> <h4 id=confirmation>Confirmation<a class=headerlink href=#confirmation title="Permanent link">&para;</a></h4> <p>We can confirm our installation using:</p> <div class=codehilite><pre><span></span><code>which ansible-galaxy
</code></pre></div> <p>and perform a version check as well if desired:</p> <div class=codehilite><pre><span></span><code>ansible-galaxy --version
</code></pre></div> <p>In my case the version information was incorrect! I installed version 3.10.4 but the version information showed 3.10.3 indicating that perhaps the developer(ers) failed to update the versioning file! </p> <p>Output example:</p> <div class=codehilite><pre><span></span><code>ansible-galaxy <span class=m>2</span>.10.3
  config <span class=nv>file</span> <span class=o>=</span> /etc/ansible/ansible.cfg
  configured module search <span class=nv>path</span> <span class=o>=</span> <span class=o>[</span><span class=s1>&#39;/home/csteel/.ansible/plugins/modules&#39;</span>, <span class=s1>&#39;/usr/share/ansible/plugins/modules&#39;</span><span class=o>]</span>
  ansible python module <span class=nv>location</span> <span class=o>=</span> /home/csteel/.venv/ansible-2.10.4/lib/python3.8/site-packages/ansible
  executable <span class=nv>location</span> <span class=o>=</span> /home/csteel/.venv/ansible-2.10.4/bin/ansible-galaxy
  python <span class=nv>version</span> <span class=o>=</span> <span class=m>3</span>.8.5 <span class=o>(</span>default, Jul <span class=m>28</span> <span class=m>2020</span>, <span class=m>12</span>:59:40<span class=o>)</span> <span class=o>[</span>GCC <span class=m>9</span>.3.0<span class=o>]</span>
</code></pre></div> <h4 id=creating-an-alias-using-bash_magic>Creating an alias using bash_magic<a class=headerlink href=#creating-an-alias-using-bash_magic title="Permanent link">&para;</a></h4> <div class=codehilite><pre><span></span><code>nano ~/bin/bash_magic/bash_aliases.d/ansible-2.10.4.sh
</code></pre></div> <p>entry example</p> <div class=codehilite><pre><span></span><code><span class=nb>alias</span> ansible-2.10.4<span class=o>=</span><span class=s1>&#39;source ~/.venv/ansible-2.10.4/bin/activate&#39;</span>
</code></pre></div> <p>Make it executable</p> <div class=codehilite><pre><span></span><code>chmod +x ~/bin/bash_magic/bash_aliases.d/ansible-2.10.4.sh
</code></pre></div> <p>create symlink to the bash magic shell script</p> <div class=codehilite><pre><span></span><code><span class=nb>cd</span> ~/.bash_aliases.d/
ln -s ~/bin/bash_magic/bash_aliases.d/ansible-2.10.4.sh .
<span class=nb>source</span> ansible-2.10.4.sh
</code></pre></div> <p>Return to previous directory</p> <div class=codehilite><pre><span></span><code><span class=nb>cd</span> -
</code></pre></div> <p>Test your new alias</p> <div class=codehilite><pre><span></span><code>ansible-2.10.4
</code></pre></div> <p>your command prompt should change to reflect your pip3 installation. You may want to change to your mkdocs-material.someversion and then back to your ansible virtual environment to ensure that all if good. My command prompt looked like this:</p> <div class=codehilite><pre><span></span><code><span class=o>(</span>ansible-2.10.4<span class=o>)</span> csteel@p1u20:~/MEGAsync/projects/ansible-project-expo$ 
</code></pre></div> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <script src=../../assets/javascripts/vendor.0ac82a11.min.js></script> <script src=../../assets/javascripts/bundle.f81dfb4d.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script> <script>
        app = initialize({
          base: "../..",
          features: ['navigation.instant', 'navigation.tabs'],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>